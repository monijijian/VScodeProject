### 大致流程
1. 在地址栏输入url
2. 浏览器根据DNS查找域名对应的ip地址
3. 浏览器根据ip地址与服务器建立连接
4. 浏览器与服务器通信：浏览器请求，服务器处理请求，浏览器呈现页面


# 从物理设备看
## 构建请求
1. 应用层进行DNS解析
2. 应用层生成http请求报文
3. 传输层建立TCP连接
4. 网络层使用ip地址协议来选择线路
5. 数据链路层实现网络相邻结点的可靠通信
6. 物理层传输数据

## 网络传输
从客户机到服务器要经过许多网络设备
- 集线器 
- 交换机
- 路由器

## 服务器处理及反向运输
服务器接收到比特流 ，把比特流转换成帧格式 ，上传到数据链路层；
服务器检查数据帧的mac地址，与本网卡相同就拆除数据链路层的封装，把数据包上传到网络层
网络层比对ip地址，与本机IP地址相同，拆除网络层的封装，分段上传到传输层
传输层对数据分段进行确认、排序、重组，确保可靠性，再被传到应用层

## 浏览器渲染
浏览器接受通信与服务器相同
1. 如果http响应报文是301或者302 重定向，则浏览器会向响应头中的location再次发送请求
2. 浏览器处理 http响应报文的 主体内容，首先使用loader模块加载相应资源
3. 使用 parse模块 解析HTML、CSS、Javascript资源
4. 构建DOM树、Render树以及RenderLayer树
5. 布局和渲染
6. 硬件加速

### 回流和重排
　回流是指窗口尺寸被修改、发生滚动操作，或者元素位置相关属性被更新时会触发布局过程，在布局过程中要计算所有元素的位置信息。由于HTML使用的是流式布局，如果页面中的一个元素的尺寸发生了变化，则其后续的元素位置都要跟着发生变化，也就是重新进行流式布局的过程，所以被称之为回流

　　前面介绍过渲染引擎生成的3个树：DOM树、Render树、Render Layer树。回流发生在Render树上。常说的脱离文档流，就是指脱离渲染树Render Tree

重绘是指当与视觉相关的样式属性值被更新时会触发绘制过程，在绘制过程中要重新计算元素的视觉息，使元素呈现新的外观

　　由于元素的重绘repaint只发生在渲染层 render layer上。所以，如果要改变元素的视觉属性，最好让该元素成为一个独立的渲染层render layer
下面列举一些减少回流次数的方法

　　（1）不要一条一条地修改DOM样式，而是修改className或者修改style.cssText

　　（2）在内存中多次操作节点，完成后再添加到文档中去

　　（3）对于一个元素进行复杂的操作时，可以先隐藏它，操作完成后再显示

　　（4）在需要经常获取那些引起浏览器回流的属性值时，要缓存到变量中

　　（5）不要使用table布局，因为一个小改动可能会造成整个table重新布局。而且table渲染通常要3倍于同等元素时间

　　此外，将需要多次重绘的元素独立为render layer渲染层，如设置absolute，可以减少重绘范围；对于一些进行动画的元素，可以进行硬件渲染，从而避免重绘和回流



# 相关知识衔接

#### URL
常见的url由 ： 协议名、域名、端口号组成，此外还包含一些路径、查询以及其他片段
通常端口号不常见是因为使用默认端口号，由协议名就能确认端口号
比如http默认端口是80  ，https默认端口443

#### 缓存
根据是否需要重新向服务器发起请求分为 协商缓存和强缓存
##### 浏览器加载页面资源的简单流程
1. 浏览器先根据这个资源的http头信息来判断是否命中强缓存。如果命中则直接加在缓存中的资源，并不会将请求发送到服务器。
如果未命中强缓存，则浏览器会将资源加载请求发送到服务器。服务器来判断浏览器本地缓存是否失效。若可以使用，则服务器并不会返回资源信息，浏览器继续从缓存加载资源。
如果未命中协商缓存，则服务器会将完整的资源返回给浏览器，浏览器加载新资源，并更新缓存。
##### 强缓存
浏览器会根据资源的http头信息来判断是否命中强缓存，如果命中直接使用强缓存，不再向服务器发送请求
强缓存由http响应头中的  Expires或者Cache-Control  两个字段来控制